{% extends "dossier_inscription/base_dossier.html" %}

{% block content %}
<h3>Informations du participant</h3>
  {{ inscription.get_genre_display }} {{ inscription.nom }}
  {{ inscription.prenom }}<br/>
  {{ inscription.poste }}<br/>
  {{ inscription.courriel }}<br/>
  T:{{ inscription.telephone }}<br/>
  F:{{ inscription.telecopieur }}<br/>

  <h3>Adresse de facturation</h3>
  <div id="adresse-container">
  {% include "dossier_inscription/includes/adresse.html" %}
  </div>

  {% if inscription.accompagnateur %}
    <h3>Accompagnateur personnel</h3>
    {{ inscription.get_accompagnateur_genre_display }}
    {{ inscription.accompagnateur_nom }},
    {{ inscription.accompagnateur_prenom }}
  {% endif %}
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
function init_dossier() {
  $("#adresse-container").on('click', '#modifier-adresse' ,
      click_modifier_adresse);
  ajaxify_form_adresse();
}

function ajaxify_form_adresse() {
    $('#form-adresse form').ajaxForm({
      success: form_adresse_submit_success
    });
}

function form_adresse_submit_success(responseText) {
  $('#adresse-container').html(responseText);
  ajaxify_form_adresse();
}

function click_modifier_adresse(e) {
  e.preventDefault();
  $('#adresse').hide();
  $('#form-adresse').show();
}

$(init_dossier);
</script>
{% endblock %}
