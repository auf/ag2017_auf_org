{% extends "inscription/base.html" %}
{% load inscription %}

{% block extrahead %}
{{ block.super }}
<script type="text/javascript">
$(document).ready(function() {
    function toggle_accompagnateur_fields() {
        //var fields = $('fieldset.accompagnateur .ctrlHolder').not(':has(#id_accompagnateur)');
        var div_fields =$("div#details-accompagnateurs");
        if ($('#id_accompagnateur').is(':checked')) {
            div_fields.show();
        }
        else {
            div_fields.hide();
        }
    }
    $('#id_accompagnateur').change(toggle_accompagnateur_fields);
    toggle_accompagnateur_fields();
});
</script>
{% endblock %}

{% block formulaire %}
<h1>Formulaire d'inscription 2/7 - Participant</h1>
<ul id="etapes">
    {% for etape in etapes %}
    {% if etape.tab_visible %}
        <li{% ifequal etape.n etape_courante.n %} class="etape_courante"{% else %}{% endifequal %}>
        {{ etape.label }}</li>
    {% endif %}
    {% endfor %}
</ul>
<form class="uniForm" method="post">
  {% csrf_token %}

<div class="buttonHolder">
  <p><strong>Pour débuter l'inscription, merci de saisir vos renseignements personnels.</strong> <br><br>Les champs marqués d'un astérisque (<span class="required">*</span>) doivent obligatoirement être remplis.</p>
</div>

  <fieldset class="inlineLabels">
    <h2>Renseignements personnels</h2>
    {% inline_radio form.genre %}
    {% field form.nom %}
    {% field form.prenom %}
    {% field form.nationalite %}
    {% field form.poste %}
    {% field form.courriel %}
    {% field form.adresse %}
    {% field form.ville %}
    {% field form.pays %}
    {% field form.code_postal %}
    {% field form.telephone %}
    {% field form.telecopieur %}
  </fieldset>

  <fieldset class="inlineLabels accompagnateur">
    <h2>Autre voyageur non-participant à l'assemblée générale (ex.: conjoint, époux, etc.)</h2>
    {% checkbox form.accompagnateur %}
    <div id="details-accompagnateurs">

    {% if inscription.prise_en_charge_hebergement_possible or inscription.prise_en_charge_transport_possible %}
			<p class="avertissement">Attention : L'AUF ne pourra prendre en charge le
      transport ni le séjour de votre invité, un supplément
		  sera facturé pour la réservation d'une chambre double.</p>
    {% endif %}

    {% inline_radio form.accompagnateur_genre %}
    {% field form.accompagnateur_nom %}
    {% field form.accompagnateur_prenom %}
    </div>
  </fieldset>

  <div class="buttonHolder">
    <input type="submit" value="Sauvegarder et continuer" class="secondaryAction" />
  </div>

</form>
{% endblock %}
