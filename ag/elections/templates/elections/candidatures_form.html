<form method="post">
  {% csrf_token %}
  {{ formset.management_form }}
  {% regroup formset by candidat.region as forms_by_region %}
  {% for region_forms in forms_by_region %}
    <h2>{{ region_forms.grouper.nom }}</h2>
    <table>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Poste</th>
        <th>Établissement</th>
        <th>Suppléant</th>
        {% for radio in region_forms.list.0.election %}
          <th>{{ radio.choice_label }}</th>
        {% endfor %}
        <th>Suppléant de</th>
        <th></th>
        <th></th>
      </tr>

      {% for form in region_forms.list %}
        <tr>
          {{ form.participant_id }}
          <td width="9%">{{ form.candidat.nom }}</td>
          <td width="9%">{{ form.candidat.prenom }}</td>
          <td width="7%">{{ form.candidat.poste }}</td>
          <td width="10%">{{ form.candidat.etablissement_nom }}</td>
          <td width="10%">
            {% if form.suppleant %}
            {{ form.suppleant.nom_complet }}
            {% else %}
              -
            {% endif %}
          </td>
          {% for radio in form.election %}
            <td width="4%">
              <input type="radio" id="{{ radio.attrs.id }}"
                     {% if radio.choice_value and not radio.choice_value in form.candidatures_possibles %}
                     disabled="disabled"
                     {% endif %}
                     name="{{ radio.name }}"
                     value="{{ radio.choice_value }}"
                     {% if radio.is_checked %}checked="checked"{% endif %}/>
            </td>
          {% endfor %}
          <td width="10%">
              <span class="js-select-suppleant" {% if form.election.value != "S" %} style="display: none;"{% endif %}>
              {{ form.suppleant_de_id }}
              </span>
          </td>
          <td width="5%">Libre ? {{ form.libre }}</td>
          <td width="5%">Éliminé ? {{ form.elimine }}</td>
        </tr>
      {% endfor %}
    </table>
  {% endfor %}
  </form>